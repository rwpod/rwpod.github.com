var RetinaTag=RetinaTag||{};RetinaTag.init=function(){window.matchMedia("(-webkit-device-pixel-ratio:1)").addListener(RetinaTag.updateImages),document.addEventListener("page:load",RetinaTag.updateImages),document.addEventListener("turbolinks:load",RetinaTag.updateImages),document.addEventListener("retina_tag:refresh",RetinaTag.updateImages)},RetinaTag.updateImages=function(){for(var e=document.getElementsByTagName("img"),a=0;a<e.length;a++)e[a].getAttribute("data-lazy-load")||RetinaTag.refreshImage(e[a])},RetinaTag.refreshImage=function(e){var a=e.getAttribute("data-lazy-load"),t=e.src,i=e.getAttribute("data-hidpi-src"),d=e.getAttribute("data-lowdpi-src");i&&(a&&e.removeAttribute("data-lazy-load"),window.devicePixelRatio>1&&t!=i?(d||e.setAttribute("data-lowdpi-src",t),e.src=i):(!window.devicePixelRatio||window.devicePixelRatio<=1)&&(t==i||d&&t!=d)&&(e.src=d))},window.devicePixelRatio!==undefined&&(RetinaTag.init(),$(document).ready(RetinaTag.updateImages));